import{m as e}from"./index-BMWzTWYY.js";const u=e.Schema,g=e.model,o=e.models,S=new u({name:{type:String,required:!0},quantity:{type:Number,required:!0},unit:{type:String,required:!0}},{_id:!1}),t=new u({title:{type:String,required:!0,trim:!0,maxlength:200},image:{type:String,required:!0},rating:{type:Number,default:0,min:0,max:5},category:{type:String,required:!0,enum:["Breakfast","Lunch","Dinner","Snack","Dessert","Beverage"]},cookTime:{type:String,required:!0},servings:{type:Number,required:!0,min:1},calories:{type:Number,required:!0,min:0},ingredients:[S],instructions:[{type:String,required:!0}],videoUrl:{type:String},viewCount:{type:Number,default:0},createdBy:{type:u.Types.ObjectId,ref:"User"},isPublished:{type:Boolean,default:!0},tags:[String],difficulty:{type:String,enum:["Easy","Medium","Hard"],default:"Medium"},cuisine:String},{timestamps:!0,toJSON:{virtuals:!0},toObject:{virtuals:!0}});t.index({category:1});t.index({rating:-1});t.index({createdAt:-1});t.index({viewCount:-1});t.index({title:"text",tags:"text"});t.virtual("averageRating").get(function(){return this.rating});const b=o&&o.Recipe||g("Recipe",t),s=e.Schema,y=e.model,m=e.models,i=new s({username:{type:String,required:!0,unique:!0,trim:!0,minlength:3,maxlength:30},email:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0},password:{type:String,minlength:6},avatar:String,firstName:{type:String,trim:!0,maxlength:50},lastName:{type:String,trim:!0,maxlength:50},bio:{type:String,maxlength:500},favoriteRecipes:[{type:s.Types.ObjectId,ref:"Recipe"}],createdRecipes:[{type:s.Types.ObjectId,ref:"Recipe"}],socialLinks:{instagram:String,twitter:String,facebook:String},preferences:{dietaryRestrictions:[String],cuisinePreferences:[String],skillLevel:{type:String,enum:["Beginner","Intermediate","Advanced"],default:"Beginner"}},isEmailVerified:{type:Boolean,default:!1},lastLoginAt:Date},{timestamps:!0,toJSON:{virtuals:!0,transform:function(x,d){return delete d.password,d}},toObject:{virtuals:!0}});i.index({email:1});i.index({username:1});i.virtual("fullName").get(function(){return this.firstName&&this.lastName?`${this.firstName} ${this.lastName}`:this.firstName||this.lastName||this.username});const q=m&&m.User||y("User",i),a=e.Schema,f=e.model,c=e.models,r=new a({recipeId:{type:a.Types.ObjectId,ref:"Recipe",required:!0},userId:{type:a.Types.ObjectId,ref:"User"},sessionId:String,ipAddress:String,userAgent:String,viewedAt:{type:Date,default:Date.now}},{timestamps:!1});r.index({recipeId:1,viewedAt:-1});r.index({userId:1});r.index({sessionId:1});r.index({recipeId:1,userId:1},{sparse:!0});const N=c&&c.ViewCount||f("ViewCount",r),l=e.Schema,h=e.model,p=e.models,n=new l({platform:{type:String,required:!0,enum:["instagram","twitter","facebook"]},user:{type:String,required:!0,trim:!0},content:{type:String,required:!0,maxlength:2e3},image:String,likes:{type:Number,default:0,min:0},shares:{type:Number,default:0,min:0},comments:{type:Number,default:0,min:0},postUrl:String,relatedRecipeId:{type:l.Types.ObjectId,ref:"Recipe"},isActive:{type:Boolean,default:!0},postedAt:{type:Date,required:!0}},{timestamps:!0,toJSON:{virtuals:!0},toObject:{virtuals:!0}});n.index({platform:1,postedAt:-1});n.index({isActive:1,postedAt:-1});n.index({relatedRecipeId:1});const w=p&&p.SocialPost||h("SocialPost",n);export{b as Recipe,w as SocialPost,q as User,N as ViewCount};
